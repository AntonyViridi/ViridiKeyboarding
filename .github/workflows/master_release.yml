      # 5️⃣ Clone ZMK
      - name: Clone ZMK
        run: git clone https://github.com/zmkfirmware/zmk.git --depth=1

      # 6️⃣ Initialize West
      - name: Initialize West
        run: |
          west init -l zmk/app
          west update

      # 7️⃣ Export Zephyr
      - name: Export Zephyr
        run: west zephyr-export

      # 8️⃣ Copy custom shield
      - name: Copy custom shield
        run: |
          mkdir -p zmk/app/boards/shields/viridikeyboard
          cp -r boards/shields/viridikeyboard/* zmk/app/boards/shields/viridikeyboard/

      # 9️⃣ Build firmware
      - name: Build firmware
        run: |
          west build -s zmk/app -d build -b nrf52840_m2 -- \
            -DZMK_CONFIG=config -DSHIELD=viridikeyboard
